{"version":3,"file":"Header.js","names":["React","useContext","Responsive","useIntl","AppContext","APP_CONFIG_INITIALIZED","ensureConfig","mergeConfig","getConfig","subscribe","PropTypes","DesktopHeaderSlot","MobileHeaderSlot","messages","AUTHN_MINIMAL_HEADER","process","env","Header","_ref","mainMenuItems","secondaryMenuItems","userMenuItems","_useContext","authenticatedUser","config","intl","defaultMainMenu","type","href","concat","LMS_BASE_URL","content","formatMessage","defaultUserMenu","heading","items","STUDIO_BASE_URL","ACCOUNT_PROFILE_URL","username","ACCOUNT_SETTINGS_URL","_toConsumableArray","ORDER_HISTORY_URL","LOGOUT_URL","mainMenu","secondaryMenu","userMenu","length","slice","loggedOutItems","LOGIN_URL","props","logo","LOGO_URL","logoAltText","SITE_NAME","logoDestination","loggedIn","avatar","createElement","Fragment","maxWidth","minWidth","defaultProps","propTypes","oneOfType","node","array","arrayOf","shape","string","oneOf","isActive","bool"],"sources":["../src/Header.jsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport Responsive from 'react-responsive';\nimport { useIntl } from '@edx/frontend-platform/i18n';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport {\n  APP_CONFIG_INITIALIZED,\n  ensureConfig,\n  mergeConfig,\n  getConfig,\n  subscribe,\n} from '@edx/frontend-platform';\n\nimport PropTypes from 'prop-types';\nimport DesktopHeaderSlot from './plugin-slots/DesktopHeaderSlot';\nimport MobileHeaderSlot from './plugin-slots/MobileHeaderSlot';\n\nimport messages from './Header.messages';\n\nensureConfig([\n  'LMS_BASE_URL',\n  'LOGOUT_URL',\n  'LOGIN_URL',\n  'SITE_NAME',\n  'LOGO_URL',\n  'ORDER_HISTORY_URL',\n  'STUDIO_BASE_URL',\n], 'Header component');\n\nsubscribe(APP_CONFIG_INITIALIZED, () => {\n  mergeConfig({\n    AUTHN_MINIMAL_HEADER: !!process.env.AUTHN_MINIMAL_HEADER,\n  }, 'Header additional config');\n});\n\n/**\n * Header component for the application.\n * Displays a header with the provided main menu, secondary menu, and user menu when the user is authenticated.\n * If any of the props (mainMenuItems, secondaryMenuItems, userMenuItems) are not provided, default\n * items are displayed.\n * For more details on how to use this component, please refer to this document:\n * https://github.com/openedx/frontend-component-header/blob/master/docs/using_custom_header.rst\n *\n * @param {list} mainMenuItems - The list of main menu items to display.\n * See the documentation for the structure of main menu item.\n * @param {list} secondaryMenuItems - The list of secondary menu items to display.\n * See the documentation for the structure of secondary menu item.\n * @param {list} userMenuItems - The list of user menu items to display.\n * See the documentation for the structure of user menu item.\n */\nconst Header = ({\n  mainMenuItems, secondaryMenuItems, userMenuItems,\n}) => {\n  const { authenticatedUser, config } = useContext(AppContext);\n  const intl = useIntl();\n\n  const defaultMainMenu = [\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/dashboard`,\n      content: intl.formatMessage(messages['header.links.courses']),\n    },\n  ];\n  const defaultUserMenu = authenticatedUser === null ? [] : [{\n    heading: '',\n    items: [\n      {\n        type: 'item',\n        href: getConfig().STUDIO_BASE_URL,\n        content: intl.formatMessage(messages['header.user.menu.studio.home']),\n      },\n      {\n        type: 'item',\n        href: `${config.LMS_BASE_URL}/dashboard`,\n        content: intl.formatMessage(messages['header.user.menu.dashboard']),\n      },\n      {\n        type: 'item',\n        href: `${config.ACCOUNT_PROFILE_URL}/u/${authenticatedUser.username}`,\n        content: intl.formatMessage(messages['header.user.menu.profile']),\n      },\n      {\n        type: 'item',\n        href: config.ACCOUNT_SETTINGS_URL,\n        content: intl.formatMessage(messages['header.user.menu.account.settings']),\n      },\n      // Users should only see Order History if have a ORDER_HISTORY_URL define in the environment.\n      ...(config.ORDER_HISTORY_URL ? [{\n        type: 'item',\n        href: config.ORDER_HISTORY_URL,\n        content: intl.formatMessage(messages['header.user.menu.order.history']),\n      }] : []),\n      {\n        type: 'item',\n        href: config.LOGOUT_URL,\n        content: intl.formatMessage(messages['header.user.menu.logout']),\n      },\n    ],\n  }];\n\n  const mainMenu = mainMenuItems || defaultMainMenu;\n  const secondaryMenu = secondaryMenuItems || [];\n\n  // WS_CUSTOM: Merge Studio URL into user menu if userMenuItems are provided\n  let userMenu = userMenuItems || defaultUserMenu;\n  if (userMenuItems && userMenuItems.length > 0) {\n    // Add Studio URL as the first item in the provided user menu\n    userMenu = [\n      {\n        heading: '',\n        items: [\n          {\n            type: 'item',\n            href: getConfig().STUDIO_BASE_URL,\n            content: intl.formatMessage(messages['header.user.menu.studio.home']),\n          },\n          ...userMenuItems[0].items,\n        ],\n      },\n      ...userMenuItems.slice(1),\n    ];\n  }\n\n  const loggedOutItems = [\n    {\n      type: 'item',\n      href: config.LOGIN_URL,\n      content: intl.formatMessage(messages['header.user.menu.login']),\n    },\n    {\n      type: 'item',\n      href: `${config.LMS_BASE_URL}/register`,\n      content: intl.formatMessage(messages['header.user.menu.register']),\n    },\n  ];\n\n  const props = {\n    logo: config.LOGO_URL,\n    logoAltText: config.SITE_NAME,\n    logoDestination: `${config.LMS_BASE_URL}/dashboard`,\n    loggedIn: authenticatedUser !== null,\n    username: authenticatedUser !== null ? authenticatedUser.username : null,\n    avatar: authenticatedUser !== null ? authenticatedUser.avatar : null,\n    mainMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : mainMenu,\n    secondaryMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : secondaryMenu,\n    userMenu: getConfig().AUTHN_MINIMAL_HEADER ? [] : userMenu,\n    loggedOutItems: getConfig().AUTHN_MINIMAL_HEADER ? [] : loggedOutItems,\n  };\n\n  return (\n    <>\n      <Responsive maxWidth={769}>\n        <MobileHeaderSlot props={props} />\n      </Responsive>\n      <Responsive minWidth={769}>\n        <DesktopHeaderSlot props={props} />\n      </Responsive>\n    </>\n  );\n};\n\nHeader.defaultProps = {\n  mainMenuItems: null,\n  secondaryMenuItems: null,\n  userMenuItems: null,\n};\n\nHeader.propTypes = {\n  mainMenuItems: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  secondaryMenuItems: PropTypes.oneOfType([\n    PropTypes.node,\n    PropTypes.array,\n  ]),\n  userMenuItems: PropTypes.arrayOf(PropTypes.shape({\n    heading: PropTypes.string,\n    items: PropTypes.arrayOf(PropTypes.shape({\n      type: PropTypes.oneOf(['item', 'menu']),\n      href: PropTypes.string,\n      content: PropTypes.string,\n      isActive: PropTypes.bool,\n    })),\n  })),\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]}